<div>
    <h1>Listado de productos</h1>

    <% if (products.docs.length > 0) { %>
      <ul>
        <% products.docs.forEach((product) => { %>
          <li>
            <h2><%= product.name %></h2>
            <p><%= product.description %></p>
            <p><strong>Price:</strong> <%= product.price %></p>
            <p><strong>Category:</strong> <%= product.category %></p>
            <form action="/carts/<%= cartId %>/products" method="post">
              <input type="hidden" name="productId" value="<%= product._id %>">
              <label for="quantity">Quantity:</label>
              <input type="number" name="quantity" id="quantity" value="1" min="1">
              <button type="submit">Add to cart</button>
            </form>
          </li>
        <% }); %>
      </ul>
      <% if (products.totalPages > 1) { %>
        <nav>
          <ul>
            <% if (products.hasPrevPage) { %>
              <li><a href="?page=<%= products.prevPage %>&limit=<%= products.limit %>">Prev</a></li>
            <% } %>
            <% for (let i = 1; i <= products.totalPages; i++) { %>
              <li <% if (i === products.page) { %>class="active"<% } %>><a href="?page=<%= i %>&limit=<%= products.limit %>"><%= i %></a></li>
            <% } %>
            <% if (products.hasNextPage) { %>
              <li><a href="?page=<%= products.nextPage %>&limit=<%= products.limit %>">Next</a></li>
            <% } %>
          </ul>
        </nav>
      <% } %>
    <% } else { %>
      <p>No products found.</p>
    <% } %>

 
</div>